---

##########################################################################
#
# vagrant_playbook.yaml
#
# Initial installation and configuration of Vagrant clients  
#
##########################################################################


#################################################

- name: Apply common configurations to all hosts
  hosts: all

  # Run as root via sudo
  become: true

  # Variables
  vars:
    - ssh_key: |
        # Generated by: /etc/ansible/vagrant_playbook.yaml
        # Public keys for developers
        ssh-rsa #insert key here

  # Actions
  tasks:
  - name: Create /root/.ssh
    file:
      path: /root/.ssh
      mode: 0700
      state: directory

  - name: Copy keys to /root/.ssh/authorized_keys
    copy:
      content: "{{ ssh_key }}"
      dest: /root/.ssh/authorized_keys
      mode: 0400
